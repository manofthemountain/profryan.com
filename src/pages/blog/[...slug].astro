---
import type { CollectionEntry } from 'astro:content';
import { getCollection } from 'astro:content';
import BlogPost from '../../layouts/BlogPost.astro';

export async function getStaticPaths() {
	const posts = await getCollection('blog');

	return posts.map((entry) => {
		const noExt = entry.id.replace(/\.(md|mdx)$/i, '');
		const slug = noExt.split('/').pop() ?? noExt;

		return {
			params: { slug },
			props: { entry },
		};
	});
}

type Props = { entry: CollectionEntry<'blog'> };
const { entry } = Astro.props;
---

<BlogPost entry={entry} />